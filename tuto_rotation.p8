pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
p={}
function _init()
 p.a=0
 p.s=1
 p.x=48
 p.y=48
end

function _draw()
 cls()
 cursor(0,0)
 color(7)
 print(p.a)
 spr_r(p.s,p.x,p.y,p.a,4,4)
end

function _update()
 if btnp(0) then p.a-=10 end
 if btnp(1) then p.a+=10 end 
 if btn(â) then p.x+=1 end
 if btn(ğŸ…¾ï¸) then p.x-=1 end
 p.a=p.a%360 
end

function spr_r(s,x,y,a,w,h)
 sw=(w or 1)*8
 sh=(h or 1)*8
 sx=(s%8)*8
 sy=flr(s/8)*8
 x0=flr(0.5*sw)
 y0=flr(0.5*sh)
 a=a/360
 sa=sin(a)
 ca=cos(a)
 for ix=0,sw-1 do
  for iy=0,sh-1 do
   dx=ix-x0
   dy=iy-y0
   xx=flr(dx*ca-dy*sa+x0)
   yy=flr(dx*sa+dy*ca+y0)
   if (xx>=0 and xx<sw and yy>=0 and yy<=sh) then
    pset(x+ix,y+iy,sget(sx+xx,sy+yy))
   end
  end
 end
end

__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000005555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000066655550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000005555555550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000005555d566666660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000d0d5d55666ccccc6000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000d0d5d5666ccccccc600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000d0d5d5666ccccccc600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000d0d5d55666ccccc6000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000005555d566666660000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000005555555550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000066655550000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000005555500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000555000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
